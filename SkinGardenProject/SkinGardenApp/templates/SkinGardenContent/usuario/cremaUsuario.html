{% extends "SkinGardenContent/usuario/encabezado.html" %}

{% load static %}

{% block content %}
        <nav onclick="cerrarMenuAbierto(), cerrarCarritoCompra(), encojerBuscador()" class="responsive-main">
            <div class="raya-titulo">
                <h2 class="titulo-categorias">Categorías</h2>
            </div>
            <a href="{% url 'inicio/usuario' %}">
                <img src="{% static 'SkinGardenContent/imagenes/iconos/volver-atras.png' %}" alt="Volver atras" class="volver-atras" title="Volver Al Inicio">
            </a>
            <ul>
                <li><a href="{% url 'hidratacionRostro/usuario' %}">Hidratación Rostro</a></li>
                <li><a href="{% url 'hidratacionCuerpo/usuario' %}">Hidratación Cuerpo</a></li>
                <li><a href="{% url 'limpiadores/usuario' %}">Limpiadores</a></li>
                <li><a href="{% url 'crema/usuario' %}" class="color-menu-categoria">Anti-Imperfecciones</a></li>
            </ul>
        </nav> 
        <main onclick="cerrarMenuAbierto(), cerrarCarritoCompra(), encojerBuscador()">
            <section class="anti-imperfecciones">
                <div class="filasP">
                    {% for ver in crema %}
                    <div class="bgCajas responsiveCajas">
                        <!-- Formulario para agregar al carrito -->
                        <form action="{% url 'agregar_al_carrito' producto_id=ver.id_productos %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="btn-agregar">
                                <img src="{% static 'SkinGardenContent/imagenes/iconos/añadir-carrito.png' %}" alt="Añadir al carrito"
                                    class="addCarrito" onclick="agregarAlCarrito()">
                            </button>
                
                            <!-- Condición para verificar si el producto es "new" y mostrar la barra de descuento -->
                            {% if ver.estado == "new" %}
                            <p class="discount">-80%</p>
                            {% endif %}
                
                            <!-- Imagen del producto -->
                            <figure class="figureCaja">
                                <a href="{% url 'producto/usuario' producto_id=ver.id_productos %}" class="links">
                                    {% if ver.imagen %}
                                        <img src="{{ ver.imagen.url }}" alt="{{ ver.nom_producto }}" class="imagenesP" title="{{ ver.nom_producto }}">
                                    {% else %}
                                        <img src="{% static 'SkinGardenContent/imagenes/productos/img-default.jpg' %}" alt="Imagen no disponible" class="imagenesP">
                                    {% endif %}
                                </a>
                            </figure>
                
                            <!-- Información del producto -->
                            <div class="productInfo">
                                <h2 class="productName">{{ ver.nom_producto }}</h2>
                                <p class="infoProduct">{{ ver.descripcion }}</p>
                            </div>
                
                            <!-- Precio del producto con descuento, si aplica -->
                            <div class="ofertas-p">
                                {% if ver.totalDescuento != ver.precio %}
                                <p class="antiguoP">RD$ {{ ver.precio }}</p>
                                <p class="nuevoP">RD$ {{ ver.totalDescuento }}</p>
                                {% else %}
                                <p class="precio">RD$ {{ ver.precio }}</p>
                                {% endif %}
                            </div>
                
                            <!-- Calificación del producto -->
                            <figure class="qualyRates">
                                <p>{{ ver.calificacion }}</p>
                            </figure>
                
                            <!-- Campo oculto para cantidad (valor predeterminado a 1) -->
                            <input type="hidden" name="cantidad" value="1">
                        </form>
                    </div>
                    {% empty %}
                    <p>No hay productos en esta categoría.</p>
                    {% endfor %}
                </div>

            </section>
        </main>
{%  endblock %}
